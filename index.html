<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Node Flow Demo</title>
    <link rel="shortcut icon" href="#" />

    <style>
        * {
            margin: 0;
            padding: 0;
        }

        html,
        body {
            width: 100%;
            height: 100%;
        }

        canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
    </style>

    <script src="./dist/web/index.js"></script>
</head>

<body>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById("canvas");
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas, false);
        resizeCanvas();

        const node1 = new FlowNode({ title: "Test Node 1" });
        node1.addOutput({ name: "test out 1", type: "test" })
        node1.addOutput({ name: "test out 2", type: "test" })
        node1.addOutput({ name: "A super duper long name!!!", type: "test" })
        node1.addWidget(new ColorWidget({ value: "#000000" }));
        node1.addWidget(new NumberWidget({ value: 1.2345 }));
        node1.addWidget(new StringWidget({ value: "woo!" }));
        node1.addWidget(new StringWidget({ value: "A super duper long text input" }));
        node1.addWidget(new ButtonWidget({
            text: "Click Me!",
            callback: () => {
                alert("Node button clicked!")
            }
        }));
        node1.addWidget(new ToggleWidget({
            text: "Example",
        }));
        node1.addWidget(new SliderWidget({
            min: 0,
            max: 10,
            value: 7.5
        }))

        const node2 = new FlowNode({
            title: "Test Node 2 With a super long Title",
            position: { x: 300, y: 100 },
        });
        node2.addInput({ name: "test input 1", type: "test" })
        node2.addOutput({ name: "test out 1", type: "test" })

        const node3 = new FlowNode({
            title: "Node 3",
            position: { x: 650, y: 200 },
        });
        node3.addInput({ name: "test input 1", type: "test" })
        node3.addWidget(new SliderWidget({
            min: 0,
            max: 10,
            value: 7.5,
            snapIncrement: .25
        }))

        const graph = new NodeFlowGraph(canvas, {
            contextMenu: {
                name: "test",
                items: [
                    { name: "a", callback: () => { alert("a") } },
                    { name: "b", callback: () => { alert("b") } }
                ],
                subMenus: [
                    {
                        name: "sub 1",
                        items: [
                            { name: "sub a" },
                            { name: "sub b" }
                        ]
                    },
                    {
                        name: "sub 2",
                        items: [
                            { name: "sub c" },
                            { name: "sub d" }
                        ],
                        subMenus: [
                            {
                                name: "sub 3",
                                items: [
                                    { name: "sub e", callback: () => { alert("e") } },
                                    { name: "sub f" }
                                ],
                            }
                        ]
                    }
                ]
            },
        });
        graph.addNode(node1);
        graph.addNode(node2);
        graph.addNode(node3);

        graph.connectNodes(node1, 1, node2, 0)
        graph.connectNodes(node2, 0, node3, 0)

    </script>
</body>

</html>